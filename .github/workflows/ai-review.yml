name: AI 30-Min Continuous Evolution

on:
  schedule:
    # áƒá€ á€™á€­á€”á€…á€ºá€á€…á€ºá€á€« á€¡á€œá€­á€¯á€¡á€œá€»á€±á€¬á€€á€º run á€…á€±á€›á€”á€º (UTC á€¡á€á€»á€­á€”á€ºá€–á€¼á€„á€·á€º)
    - cron: '*/30 * * * *'
  workflow_dispatch: # á€€á€­á€¯á€šá€ºá€á€­á€¯á€„á€º manual á€”á€¾á€­á€•á€ºá€•á€¼á€®á€¸ á€á€­á€¯á€„á€ºá€¸á€á€»á€„á€ºá€›á€„á€ºá€œá€Šá€ºá€¸ á€›á€•á€«á€á€Šá€º

jobs:
  ai-evolution:
    runs-on: ubuntu-latest
    
    # GitHub Actions á€€á€­á€¯ PR á€†á€±á€¬á€€á€ºá€”á€­á€¯á€„á€ºá€›á€”á€ºá€”á€¾á€„á€·á€º Code á€›á€±á€¸á€”á€­á€¯á€„á€ºá€›á€”á€º Permission á€¡á€•á€¼á€Šá€·á€ºá€•á€±á€¸á€á€¼á€„á€ºá€¸
    permissions:
      contents: write
      pull-requests: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Initialize and Install Gemini Library
        run: |
          npm init -y
          npm install @google/generative-ai

      - name: Run AI Evolution Script
        run: node ai-review.js
        env:
          # Settings > Secrets á€‘á€²á€™á€¾á€¬ á€‘á€Šá€·á€ºá€‘á€¬á€¸á€á€²á€· Key á€€á€­á€¯ á€á€¯á€¶á€¸á€•á€«á€á€Šá€º
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}

      - name: Create Evolution Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "AI Evolution: 30-min automated update"
          # Branch name á€€á€­á€¯ á€¡á€™á€¼á€²á€á€™á€ºá€¸ á€¡á€á€…á€ºá€–á€¼á€…á€ºá€”á€±á€…á€±á€›á€”á€º run_id á€‘á€Šá€·á€ºá€‘á€¬á€¸á€•á€«á€á€Šá€º
          branch: ai-evolution-task-${{ github.run_id }}
          title: "ğŸ¤– AI Automated Evolution (30-Min Update)"
          body: |
            Gemini AI á€€ á€™á€„á€ºá€¸á€›á€²á€· App á€€á€­á€¯ áƒá€ á€™á€­á€”á€…á€ºá€á€…á€ºá€á€« á€…á€…á€ºá€†á€±á€¸á€•á€¼á€®á€¸ á€¡á€†á€„á€·á€ºá€™á€¼á€¾á€„á€·á€ºá€á€„á€ºá€•á€±á€¸á€‘á€¬á€¸á€•á€«á€á€Šá€ºá‹
            - Dashboard Logic á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸ (Income/Expense Categories)
            - UI/UX á€•á€­á€¯á€™á€­á€¯á€œá€¾á€•á€¡á€±á€¬á€„á€º á€•á€¼á€„á€ºá€†á€„á€ºá€á€¼á€„á€ºá€¸
            - Code Clean á€–á€¼á€…á€ºá€¡á€±á€¬á€„á€º á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€¼á€„á€ºá€¸
          delete-branch: true
