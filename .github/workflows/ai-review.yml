name: AI Code Review



on:

  workflow_dispatch:



jobs:

  ai-review:

    runs-on: ubuntu-latest

    # ပြင်ဆင်ချက် - PR ဆောက်နိုင်ဖို့ permission ပေးရပါမယ်

    permissions:

      contents: write

      pull-requests: write



    steps:

      - name: Checkout repo

        uses: actions/checkout@v4 # v4 က ပိုသစ်ပါတယ်



      - name: Setup Node

        uses: actions/setup-node@v4

        with:

          node-version: 20 # ပိုသစ်တဲ့ version ကို သုံးပါ



      - name: Initialize and Install OpenAI

        run: |

          npm init -y

          npm install openai



      - name: Run AI Script

        run: node ai-review.js

        env:

          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}



      - name: Create Pull Request

        uses: peter-evans/create-pull-request@v5

        with:

          # ပြင်ဆင်ချက် - GH_TOKEN အစား GITHUB_TOKEN (default) ကို သုံးပါ

          token: ${{ secrets.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}}

          commit-message: "AI improvements"

          branch: ai-improvements

          title: "AI Suggested Improvements"

          body: "This PR was automatically generated by AI to optimize code and UI."

          delete-branch: true
