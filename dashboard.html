<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="theme-color" content="#040508" />
    <meta name="description" content="TNB Finance ‚Äì Smart personal finance manager" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>TNB ‚Äì Smart Finance</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="dashboard.css" />
  </head>
  <body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TOP NAVBAR ‚Äî Two rows
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="cmd-bar" id="cmdBar" role="banner">

      <!-- ROW 1: Avatar | Search | Bell | 3-Dots -->
      <div class="cmd-row cmd-row1">

        <button class="avatar-pill" id="avatarBtn"
                aria-label="Open profile settings" aria-haspopup="true">
          <span class="avatar-ring" id="avatarRing" aria-hidden="true">
            <img class="avatar-img" id="avatarImg" src="" alt=""
                 style="display:none" loading="lazy" />
            <span class="avatar-letter" id="avatarLetter">A</span>
          </span>
          <div class="avatar-info">
            <span class="avatar-name" id="avatarName">Alex</span>
            <span class="avatar-provider" id="avatarProvider" style="display:none"></span>
          </div>
        </button>

        <div class="search-shell" role="search">
          <svg class="search-ico" width="14" height="14" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2.2" aria-hidden="true">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <input class="search-input" id="searchInput" type="search"
                 placeholder="Search transactions‚Ä¶" autocomplete="off"
                 aria-label="Search transactions" />
          <button class="search-clear" id="searchClear" aria-label="Clear search">‚úï</button>
        </div>

        <div class="nav-actions">

          <!-- Bell -->
          <div class="bell-shell" id="bellShell">
            <button class="bell-btn" id="bellBtn"
                    aria-label="Notifications" aria-expanded="false"
                    aria-controls="notifPanel">
              <svg width="17" height="17" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                <path d="M13.73 21a2 2 0 01-3.46 0"/>
              </svg>
              <span class="bell-dot" id="bellDot" style="display:none" aria-hidden="true"></span>
            </button>
            <div class="notif-panel" id="notifPanel" role="menu"
                 aria-label="Notifications panel">
              <div class="np-head">
                <span class="np-title" data-i18n="notifications">Notifications</span>
                <button class="np-markread" id="npMarkRead">Mark all read</button>
                <button class="np-clear" id="npClear" data-i18n="clear_all">Clear All</button>
              </div>
              <div class="np-body" id="npBody" role="list">
                <p class="np-empty" id="npEmpty" data-i18n="no_notifs">No notifications yet</p>
              </div>
            </div>
          </div>

          <!-- 3-dots menu -->
          <div class="dots-shell" id="dotsShell">
            <button class="dots-btn" id="dotsBtn"
                    aria-label="More options" aria-expanded="false"
                    aria-controls="dotsMenu">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </button>
            <div class="dots-menu" id="dotsMenu" role="menu">
              <label class="dmenu-row dmenu-toggle" role="menuitem">
                <span class="dmenu-icon" aria-hidden="true">üåô</span>
                <span class="dmenu-label" data-i18n="dark_mode">Dark Mode</span>
                <span class="dm-switch">
                  <input type="checkbox" id="themeCheck" checked
                         aria-label="Toggle dark mode" />
                  <span class="dm-track"></span>
                </span>
              </label>
              <div class="dmenu-divider" role="separator"></div>
              <button class="dmenu-row" id="menuAddIncome" role="menuitem">
                <span class="dmenu-icon income-ico" aria-hidden="true">Ôºã</span>
                <span class="dmenu-label" data-i18n="add_income">Add Income</span>
              </button>
              <button class="dmenu-row" id="menuAddExpense" role="menuitem">
                <span class="dmenu-icon expense-ico" aria-hidden="true">Ôºç</span>
                <span class="dmenu-label" data-i18n="add_expense">Add Expense</span>
              </button>
              <div class="dmenu-divider" role="separator"></div>
              <button class="dmenu-row" id="menuHistory" role="menuitem">
                <span class="dmenu-icon" aria-hidden="true">üìã</span>
                <span class="dmenu-label" data-i18n="nav_transactions">History</span>
              </button>
              <button class="dmenu-row" id="menuLang" role="menuitem">
                <span class="dmenu-icon" aria-hidden="true">üåê</span>
                <span class="dmenu-label" id="menuLangLabel">Switch to ·Äô·Äº·Äî·Ä∫·Äô·Ä¨</span>
              </button>
            </div>
          </div>

        </div><!-- /.nav-actions -->
      </div><!-- /.cmd-row1 -->

      <!-- ROW 2: Premium Financial Summary -->
      <div class="cmd-row cmd-row2" aria-label="Financial summary">
        <div class="summary-strip">
          <div class="ss-item ss-balance">
            <span class="ss-label" data-i18n="available_balance">Balance</span>
            <span class="ss-val balance-col" id="r2Balance" aria-live="polite">$0.00</span>
          </div>
          <div class="ss-sep" aria-hidden="true"></div>
          <div class="ss-item">
            <span class="ss-label" data-i18n="income">Income</span>
            <span class="ss-val income-col" id="r2Income" aria-live="polite">$0.00</span>
          </div>
          <div class="ss-sep" aria-hidden="true"></div>
          <div class="ss-item">
            <span class="ss-label" data-i18n="expense">Expense</span>
            <span class="ss-val expense-col" id="r2Expense" aria-live="polite">$0.00</span>
          </div>
        </div>
      </div><!-- /.cmd-row2 -->

    </header><!-- /.cmd-bar -->

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MAIN SCROLL AREA
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="app-main" id="appMain" role="main">

      <!-- SEARCH RESULTS -->
      <section class="page hidden" id="page-search" aria-label="Search results">
        <div class="page-head">
          <h2 class="page-title" id="searchResultLabel">Results</h2>
        </div>
        <div class="txn-feed" id="searchFeed" role="list"></div>
      </section>

      <!-- HOME PAGE -->
      <section class="page active" id="page-dashboard" aria-label="Dashboard">

        <div class="greet-row">
          <div>
            <p class="greet-sub" id="greetText">Good morning,</p>
            <h1 class="greet-name" id="greetName">Alex üëã</h1>
          </div>
          <span class="date-chip" id="dateChip"></span>
        </div>

        <!-- Hero balance card -->
        <div class="hero-card" id="heroCard" aria-label="Account balance">
          <div class="hc-orb hc-orb1" aria-hidden="true"></div>
          <div class="hc-orb hc-orb2" aria-hidden="true"></div>
          <div class="hc-grid-lines" aria-hidden="true"></div>

          <div class="hc-top">
            <span class="hc-label" data-i18n="available_balance">Available Balance</span>
            <span class="hc-badge">‚óè LIVE</span>
          </div>
          <div class="hc-amount">
            <span class="hc-cur" aria-hidden="true">$</span>
            <span class="hc-num" id="balanceDisplay" aria-live="polite">0.00</span>
          </div>

          <div class="hc-stats">
            <div class="hcs-item">
              <div class="hcs-icon up" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2.5">
                  <polyline points="18 15 12 9 6 15"/>
                </svg>
              </div>
              <div>
                <span class="hcs-l" data-i18n="income">Income</span>
                <span class="hcs-v" id="totalIncomeDisplay">$0.00</span>
              </div>
            </div>
            <div class="hcs-div" aria-hidden="true"></div>
            <div class="hcs-item">
              <div class="hcs-icon dn" aria-hidden="true">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2.5">
                  <polyline points="6 9 12 15 18 9"/>
                </svg>
              </div>
              <div>
                <span class="hcs-l" data-i18n="expense">Expense</span>
                <span class="hcs-v" id="totalExpenseDisplay">$0.00</span>
              </div>
            </div>
          </div>

          <div class="hc-foot">
            <span class="hc-card-num">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 2024</span>
            <span class="hc-brand">TNB Finance</span>
          </div>
        </div><!-- /.hero-card -->

        <!-- Quick Actions -->
        <div class="section-row">
          <h2 class="section-label" data-i18n="quick_actions">Quick Actions</h2>
          <span class="qa-subtitle-hint" data-i18n="tap_to_add">Tap to add transaction</span>
        </div>
        <div class="qcat-grid" id="qcatGrid" role="list"
             aria-label="Quick action categories">
          <!-- Injected by renderQuickActions() -->
        </div>

        <!-- Usage Summary -->
        <div class="section-row" style="margin-top:4px">
          <h2 class="section-label" data-i18n="usage_summary">Usage Summary</h2>
        </div>
        <div class="usage-summary" id="usageSummary" role="list"
             aria-label="Category usage summary">
          <!-- Injected by renderUsageSummary() -->
        </div>

      </section><!-- /#page-dashboard -->

      <!-- HISTORY PAGE -->
      <section class="page hidden" id="page-transactions" aria-label="Transaction history">
        <div class="page-head">
          <h2 class="page-title" data-i18n="all_transactions">All Transactions</h2>
        </div>

        <!-- Advanced filter panel -->
        <div class="adv-filter-panel" id="advFilterPanel">

          <div class="afp-row">
            <span class="afp-label" data-i18n="filter_type">Type</span>
            <div class="filter-tabs" id="txnTabs" role="tablist"
                 aria-label="Filter by type">
              <button class="ftab active" data-filter="all"
                      role="tab" aria-selected="true" data-i18n="all">All</button>
              <button class="ftab" data-filter="income"
                      role="tab" aria-selected="false" data-i18n="income">Income</button>
              <button class="ftab" data-filter="expense"
                      role="tab" aria-selected="false" data-i18n="expense">Expense</button>
            </div>
          </div>

          <div class="afp-row afp-dates">
            <div class="afp-date-group">
              <label class="afp-label" for="txnDateFrom" data-i18n="start_date">From</label>
              <input type="date" class="date-pick" id="txnDateFrom"
                     aria-label="Start date" />
            </div>
            <div class="afp-date-group">
              <label class="afp-label" for="txnDateTo" data-i18n="end_date">To</label>
              <input type="date" class="date-pick" id="txnDateTo"
                     aria-label="End date" />
            </div>
          </div>

          <div class="afp-error" id="afpError" role="alert"
               aria-live="polite" style="display:none"></div>

          <div class="afp-actions">
            <button class="afp-apply" id="afpApply" data-i18n="apply_filter">
              Apply Filter
            </button>
            <button class="afp-reset" id="afpReset" data-i18n="reset_filter">
              Reset
            </button>
            <button class="csv-btn" id="csvBtnTxn" aria-label="Export CSV">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2.2" aria-hidden="true">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <span data-i18n="export_csv">Export CSV</span>
            </button>
          </div>

          <div class="afp-active-badge" id="afpActiveBadge"
               aria-live="polite" style="display:none">
            <span id="afpActiveText"></span>
            <button class="afp-badge-clear" id="afpBadgeClear"
                    aria-label="Clear active filter">‚úï</button>
          </div>

        </div><!-- /.adv-filter-panel -->

        <div class="txn-feed" id="txnFeed" role="list"
             aria-label="Transaction list"></div>
      </section><!-- /#page-transactions -->

      <!-- REPORTS PAGE -->
      <section class="page hidden" id="page-reports" aria-label="Financial reports">
        <div class="page-head">
          <h2 class="page-title" data-i18n="reports">Reports</h2>
        </div>

        <div class="rep-cards" role="list">

          <div class="rep-card income-rc" role="listitem">
            <div class="rep-icon income-ico-wrap" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
              </svg>
            </div>
            <div>
              <span class="rep-lbl" data-i18n="total_income">Total Income</span>
              <span class="rep-val income-col" id="repIncome" aria-live="polite">$0.00</span>
            </div>
          </div>

          <div class="rep-card expense-rc" role="listitem">
            <div class="rep-icon expense-ico-wrap" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2">
                <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/>
              </svg>
            </div>
            <div>
              <span class="rep-lbl" data-i18n="total_expense">Total Expense</span>
              <span class="rep-val expense-col" id="repExpense" aria-live="polite">$0.00</span>
            </div>
          </div>

          <div class="rep-card" role="listitem">
            <div class="rep-icon balance-ico-wrap" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/>
                <path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/>
              </svg>
            </div>
            <div>
              <span class="rep-lbl" data-i18n="net_balance">Net Balance</span>
              <span class="rep-val" id="repBalance" aria-live="polite">$0.00</span>
            </div>
          </div>

          <div class="rep-card" role="listitem">
            <div class="rep-icon count-ico-wrap" aria-hidden="true">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                   stroke="currentColor" stroke-width="2">
                <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/>
              </svg>
            </div>
            <div>
              <span class="rep-lbl" data-i18n="total_transactions">Transactions</span>
              <span class="rep-val" id="repCount" aria-live="polite">0</span>
            </div>
          </div>

        </div><!-- /.rep-cards -->

        <div class="chart-card">
          <div class="cc-head">
            <h3 class="section-label" data-i18n="spending_overview">Spending Overview</h3>
            <select class="period-sel" id="chartPeriod" aria-label="Select period">
              <option value="7"  data-i18n="last_7">Last 7 Days</option>
              <option value="30" data-i18n="last_30">Last 30 Days</option>
            </select>
          </div>
          <div class="chart-wrap">
            <canvas id="spendingCanvas" role="img" aria-label="Spending chart"></canvas>
          </div>
        </div>

        <h3 class="section-label" style="margin:20px 0 10px"
            data-i18n="category_breakdown">Category Breakdown</h3>
        <div class="cat-breakdown" id="catBreakdown" role="list"></div>

      </section><!-- /#page-reports -->

      <!-- SETTINGS / PROFILE PAGE -->
      <section class="page hidden" id="page-settings" aria-label="Settings">
        <div class="page-head">
          <h2 class="page-title" data-i18n="settings">Settings</h2>
        </div>

        <!-- Profile card ‚Äî different display for social vs email login -->
        <div class="profile-card" id="profileCard">
          <div class="pc-avatar" id="pcAvatar" aria-label="Profile avatar">A</div>
          <div class="pc-info">
            <input
              class="pc-name-input"
              id="profileNameInput"
              type="text"
              value="Alex Morgan"
              placeholder="Your name"
              aria-label="Display name"
              autocomplete="name"
              maxlength="40"
            />
            <span class="pc-badge" data-i18n="premium_member">Premium Member</span>
            <!-- Social info block ‚Äî hidden unless social/OAuth login -->
            <div class="pc-social-info" id="pcSocialInfo" style="display:none">
              <span class="pc-social-badge" id="pcSocialBadge">Social Account</span>
              <span class="pc-social-provider" id="pcSocialProvider"></span>
              <span class="pc-email" id="pcEmail"></span>
            </div>
          </div>
        </div>

        <div class="settings-group">

          <div class="sg-row">
            <div class="sg-info">
              <span class="sg-title" data-i18n="dark_mode">Dark Mode</span>
              <span class="sg-sub" data-i18n="dark_mode_sub">Switch between dark and light</span>
            </div>
            <label class="tog-switch" aria-label="Toggle dark mode">
              <input type="checkbox" id="themeToggle" checked />
              <span class="tog-track"></span>
            </label>
          </div>

          <div class="sg-row">
            <div class="sg-info">
              <span class="sg-title" data-i18n="language">Language</span>
              <span class="sg-sub" data-i18n="language_sub">English / Burmese</span>
            </div>
            <button class="lang-btn" id="langBtn">
              <span id="langBtnLbl">English</span> ‚Ä∫
            </button>
          </div>

          <div class="sg-row">
            <div class="sg-info">
              <span class="sg-title" data-i18n="notifications_setting">Notifications</span>
              <span class="sg-sub" data-i18n="notifications_sub">Balance change alerts</span>
            </div>
            <label class="tog-switch" aria-label="Toggle notifications">
              <input type="checkbox" id="notifToggle" checked />
              <span class="tog-track"></span>
            </label>
          </div>

          <!-- Password change row ‚Äî hidden for social/OAuth login -->
          <div class="sg-row" id="passwordRow">
            <div class="sg-info">
              <span class="sg-title" data-i18n="change_password">Change Password</span>
              <span class="sg-sub" data-i18n="change_password_sub">Update your account password</span>
            </div>
            <button class="lang-btn" id="changePasswordBtn" data-i18n="change">
              Change
            </button>
          </div>

          <div class="sg-row">
            <div class="sg-info">
              <span class="sg-title" data-i18n="clear_data">Clear All Data</span>
              <span class="sg-sub" data-i18n="clear_data_sub">Remove all transactions</span>
            </div>
            <button class="danger-btn" id="clearBtn" data-i18n="clear">Clear</button>
          </div>

        </div><!-- /.settings-group -->

        <!-- Logout button ‚Äî FIX: removed nested <span> and stray <a> tag -->
        <button class="logout-btn" id="logoutBtn" aria-label="Logout">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          <span data-i18n="logout">Logout</span>
        </button>

      </section><!-- /#page-settings -->

    </main><!-- /.app-main -->

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         BOTTOM NAVIGATION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <nav class="bot-nav" id="botNav" role="navigation" aria-label="Main navigation">

      <button class="bn-btn active" data-page="dashboard" id="bn-dashboard"
              aria-label="Home" aria-current="page">
        <svg class="bn-ico" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
          <rect x="3" y="3" width="7" height="7" rx="1.5"/>
          <rect x="14" y="3" width="7" height="7" rx="1.5"/>
          <rect x="3" y="14" width="7" height="7" rx="1.5"/>
          <rect x="14" y="14" width="7" height="7" rx="1.5"/>
        </svg>
        <span class="bn-lbl" data-i18n="nav_dashboard">Home</span>
      </button>

      <button class="bn-btn" data-page="transactions" id="bn-transactions"
              aria-label="Transaction history">
        <svg class="bn-ico" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
          <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/>
        </svg>
        <span class="bn-lbl" data-i18n="nav_transactions">History</span>
      </button>

      <!-- Centre FAB ‚Äî Add Transaction -->
      <div class="fab-zone">
        <button class="fab-main" id="fabMain" aria-label="Add transaction"
                aria-expanded="false">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2.5" aria-hidden="true">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
        <div class="fab-sub" id="fabSub" role="menu">
          <button class="fab-sub-btn fab-income" id="fabIncome" role="menuitem">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2.5" aria-hidden="true">
              <polyline points="18 15 12 9 6 15"/>
            </svg>
            <span data-i18n="add_income">Income</span>
          </button>
          <button class="fab-sub-btn fab-expense" id="fabExpense" role="menuitem">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2.5" aria-hidden="true">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
            <span data-i18n="add_expense">Expense</span>
          </button>
        </div>
        <div class="fab-backdrop" id="fabBackdrop" aria-hidden="true"></div>
      </div><!-- /.fab-zone -->

      <button class="bn-btn" data-page="reports" id="bn-reports"
              aria-label="Reports">
        <svg class="bn-ico" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
          <path d="M18 20V10M12 20V4M6 20v-6"/>
        </svg>
        <span class="bn-lbl" data-i18n="reports">Reports</span>
      </button>

      <button class="bn-btn" data-page="settings" id="bn-settings"
              aria-label="Settings">
        <svg class="bn-ico" width="20" height="20" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/>
        </svg>
        <span class="bn-lbl" data-i18n="nav_settings">Settings</span>
      </button>

    </nav><!-- /.bot-nav -->

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MODALS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- Transaction modal (Income / Expense) -->
    <div class="modal-veil" id="txnVeil"
         role="dialog" aria-modal="true" aria-labelledby="mcTitle">
      <div class="modal-card" id="txnCard">
        <div class="mc-head">
          <h2 class="mc-title" id="mcTitle">Add Income</h2>
          <button class="mc-close" id="mcClose" aria-label="Close">‚úï</button>
        </div>
        <div class="mc-body">
          <input type="hidden" id="txnType" value="income" />

          <div class="field">
            <label class="field-lbl" for="txnAmount" data-i18n="amount">Amount ($)</label>
            <div class="amount-wrap">
              <span class="amt-prefix" aria-hidden="true">$</span>
              <input
                type="number"
                class="field-input amt-input"
                id="txnAmount"
                placeholder="0.00"
                min="0.01"
                step="0.01"
                inputmode="decimal"
                autocomplete="off"
              />
            </div>
          </div>

          <div class="field">
            <label class="field-lbl" for="txnCategory" data-i18n="category">Category</label>
            <select class="field-input" id="txnCategory"></select>
          </div>

          <div class="field">
            <label class="field-lbl" for="txnDesc" data-i18n="description">Description</label>
            <input
              type="text"
              class="field-input"
              id="txnDesc"
              placeholder="e.g. Monthly salary"
              autocomplete="off"
              maxlength="120"
            />
          </div>

          <div class="field">
            <label class="field-lbl" for="txnDate" data-i18n="date">Date</label>
            <input type="date" class="field-input" id="txnDate" />
          </div>

          <button class="submit-btn" id="txnSubmit" data-i18n="add_transaction">
            Add Transaction
          </button>
        </div>
      </div>
    </div><!-- /#txnVeil -->

    <!-- Confirmation modal -->
    <div class="modal-veil" id="cfmVeil"
         role="dialog" aria-modal="true" aria-labelledby="cfmTitle">
      <div class="modal-card cfm-card">
        <div class="cfm-icon" aria-hidden="true">‚ö†Ô∏è</div>
        <h3 class="cfm-title" id="cfmTitle">Are you sure?</h3>
        <p class="cfm-msg" id="cfmMsg">This cannot be undone.</p>
        <div class="cfm-btns">
          <button class="cfm-cancel" id="cfmCancel" data-i18n="cancel">Cancel</button>
          <button class="danger-btn cfm-ok" id="cfmOk" data-i18n="confirm">Confirm</button>
        </div>
      </div>
    </div><!-- /#cfmVeil -->

    <!-- Toast container -->
    <div class="toast-container" id="toastContainer"
         aria-live="polite" aria-atomic="false"></div>

    <!-- Supabase SDK ‚Äî must load before dashboard.js -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Main script -->
    <script src="dashboard.js"></script>

    <!-- Service Worker registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker
            .register('/TNB/sw.js', { scope: '/TNB/' })
            .catch(() => navigator.serviceWorker.register('sw.js'));
        });
      }
    </script>

  </body>
</html>
